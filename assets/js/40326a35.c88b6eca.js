"use strict";(self.webpackChunkappcircle_docusaurus=self.webpackChunkappcircle_docusaurus||[]).push([[697],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>u});var i=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=i.createContext({}),p=function(e){var t=i.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},s=function(e){var t=p(e.components);return i.createElement(c.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},d=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),d=p(n),u=a,h=d["".concat(c,".").concat(u)]||d[u]||m[u]||o;return n?i.createElement(h,r(r({ref:t},s),{},{components:n})):i.createElement(h,r({ref:t},s))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,r=new Array(o);r[0]=d;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,r[1]=l;for(var p=2;p<o;p++)r[p]=n[p];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5134:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>d,frontMatter:()=>r,metadata:()=>c,toc:()=>s});var i=n(7462),a=(n(7294),n(3905)),o=n(4996);const r={title:"W5100S-EVB-Pico (Micropython)",metaTitle:"W5100S-EVB-Pico",metaDescription:"W5100S-EVB-Pico",sidebar_position:7},l="Connect with W5100S-EVB-Pico and Micropython",c={unversionedId:"guide/connect-w5100s-evb-pico-micropython",id:"guide/connect-w5100s-evb-pico-micropython",title:"W5100S-EVB-Pico (Micropython)",description:"In this guide, learn how to connect to WIZnet Cloud using W5100S-EVB-Pico and Micropython.",source:"@site/docs/guide/connect-w5100s-evb-pico-micropython.md",sourceDirName:"guide",slug:"/guide/connect-w5100s-evb-pico-micropython",permalink:"/guide/connect-w5100s-evb-pico-micropython",draft:!1,editUrl:"https://github.com/Wiznet-Open-Cloud/aws-wiznet-cloud-docs/tree/main/docs/guide/connect-w5100s-evb-pico-micropython.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{title:"W5100S-EVB-Pico (Micropython)",metaTitle:"W5100S-EVB-Pico",metaDescription:"W5100S-EVB-Pico",sidebar_position:7},sidebar:"mySidebar",previous:{title:"Creating a Dashboard",permalink:"/quickstart/how-to-connect-device/creating-dashboard"},next:{title:"Device Management",permalink:"/features/device-management"}},p={},s=[{value:"Prerequisite",id:"prerequisite",level:2},{value:"Device",id:"device",level:3},{value:"Environment",id:"environment",level:3},{value:"Upload firmware",id:"upload-firmware",level:2},{value:"Run application",id:"run-application",level:2},{value:"Modify main.py",id:"modify-mainpy",level:3},{value:"Upload certificates",id:"upload-certificates",level:3},{value:"Install the Micropython library",id:"install-the-micropython-library",level:3},{value:"Run and Monitor",id:"run-and-monitor",level:2},{value:"RAW DATA monitoring",id:"raw-data-monitoring",level:3}],m={toc:s};function d(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,i.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"connect-with-w5100s-evb-pico-and-micropython"},"Connect with W5100S-EVB-Pico and Micropython"),(0,a.kt)("p",null,"In this guide, learn how to connect to WIZnet Cloud using W5100S-EVB-Pico and Micropython."),(0,a.kt)("h2",{id:"prerequisite"},"Prerequisite"),(0,a.kt)("h3",{id:"device"},"Device"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://docs.wiznet.io/Product/iEthernet/W5100S/w5100s-evb-pico"},"W5100S-EVB-Pico"))),(0,a.kt)("div",null,(0,a.kt)("img",{alt:"w5100s-evb-pico",src:"https://github.com/Wiznet/RP2040-HAT-AWS-C/raw/main/static/images/getting_started/w5100s-evb-pico_main.png",width:"50%"})),(0,a.kt)("p",null,"Please refer to the link below to check the details of your device."),(0,a.kt)("a",{className:"rlc-container",href:"https://docs.wiznet.io/Product/iEthernet/W5100S/w5100s-evb-pico"},"\n  ",(0,a.kt)("div",{parentName:"a",className:"rlc-info"},"\n    ",(0,a.kt)("div",{parentName:"div",className:"rlc-title"},"W5100S-EVB-Pico | WIZnet Document System"),"\n    ",(0,a.kt)("div",{parentName:"div",className:"rlc-description"},"W5100S-EVB-Pico made for prototyping and testing Ethernet capabilities on Pico"),"\n    ",(0,a.kt)("div",{parentName:"div",className:"rlc-url-container"},"\n      ",(0,a.kt)("img",{parentName:"div",className:"rlc-favicon",src:"https://www.google.com/s2/favicons?domain=docs.wiznet.io",alt:"W5100S-EVB-Pico | WIZnet Document System favicon",width:16,height:16}),"\n      ",(0,a.kt)("span",{parentName:"div",className:"rlc-url"},"https://docs.wiznet.io/Product/iEthernet/W5100S/w5100s-evb-pico"),"\n    "),"\n  "),"\n  ",(0,a.kt)("div",{parentName:"a",className:"rlc-image-container"},"\n      ",(0,a.kt)("img",{parentName:"div",className:"rlc-image",src:"https://docs.wiznet.io/img/wiznet-logo.png",alt:"W5100S-EVB-Pico | WIZnet Document System"}),"\n    ")),(0,a.kt)("h3",{id:"environment"},"Environment"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Windows or Linux environment"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://thonny.org/"},"Thonny"))),(0,a.kt)("p",null,"Use Thonny as development environment for Micropython. Thonny is an integrated development environment for the Python language."),(0,a.kt)("br",null),"Click the link to download and install the Installer.",(0,a.kt)("h2",{id:"upload-firmware"},"Upload firmware"),(0,a.kt)("p",null,"Download the device's Micropython firmware (.uf2) file from the link below."),(0,a.kt)("a",{className:"rlc-container",href:"https://micropython.org/download/W5100S_EVB_PICO/"},"\n  ",(0,a.kt)("div",{parentName:"a",className:"rlc-info"},"\n    ",(0,a.kt)("div",{parentName:"div",className:"rlc-title"},"MicroPython - Python for microcontrollers"),"\n    ",(0,a.kt)("div",{parentName:"div",className:"rlc-description"},"MicroPython is a lean and efficient\n        implementation of the Python 3 programming language\n        that includes a small subset of the Python standard library and is\n        optimised to run on microcontrollers and in constrained environments."),"\n    ",(0,a.kt)("div",{parentName:"div",className:"rlc-url-container"},"\n      ",(0,a.kt)("img",{parentName:"div",className:"rlc-favicon",src:"https://www.google.com/s2/favicons?domain=micropython.org",alt:"MicroPython - Python for microcontrollers favicon",width:16,height:16}),"\n      ",(0,a.kt)("span",{parentName:"div",className:"rlc-url"},"https://micropython.org/download/W5100S_EVB_PICO/"),"\n    "),"\n  "),"\n  ",(0,a.kt)("div",{parentName:"a",className:"rlc-image-container"},"\n      ",(0,a.kt)("img",{parentName:"div",className:"rlc-image",src:"http://micropython.org/static/img/Mlogo_138wh.png",alt:"MicroPython - Python for microcontrollers"}),"\n    ")),(0,a.kt)("p",null,"Upload the firmware to your device. The upload process is as follows."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Put the device into Boot mode."),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"H/W pinout v1.0: Apply power while pressing the BOOTSEL button."),(0,a.kt)("li",{parentName:"ul"},"H/W pinout v1.1: While holding down the BOOTSEL button, press the RUN button."))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"After entering Boot mode, RPI-RP2 drive is created in Host PC as shown below."))),(0,a.kt)("div",null,(0,a.kt)("img",{alt:"rpi-rp2-drive",src:(0,o.Z)("/img/guide/rpi-rp2-drive.png")})),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Copy the firmware and paste it to the drive."),(0,a.kt)("li",{parentName:"ul"},"The drive will disappear and the firmware will be uploaded.")),(0,a.kt)("h2",{id:"run-application"},"Run application"),(0,a.kt)("p",null,"The link below contains sample application code."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/renakim/W5100S-EVB-Pico-Micropython/tree/main/examples/AWS"},"W5100S-EVB-Pico-Micropython - AWS Sample"))),(0,a.kt)("p",null,"A sample that sets up Ethernet and authenticates and connects to AWS IoT Core via MQTTS to send messages."),(0,a.kt)("p",null,"Create a main.py file in Thonny and paste the code into it."),(0,a.kt)("h3",{id:"modify-mainpy"},"Modify main.py"),(0,a.kt)("p",null,"The following variables must be set."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Device Id"),(0,a.kt)("li",{parentName:"ul"},"MQTT Topic (Auto set by Device Id)"),(0,a.kt)("li",{parentName:"ul"},"Endpoint"),(0,a.kt)("li",{parentName:"ul"},"Certificates",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Device certificate"),(0,a.kt)("li",{parentName:"ul"},"Device private key")))),(0,a.kt)("p",null,"Enter the device information created in WIZnet Cloud as a variable value."),(0,a.kt)("div",null,(0,a.kt)("img",{alt:"template-list",src:(0,o.Z)("/img/quickstart/connecting-device-cloud/device_management_tab.png")})),(0,a.kt)("p",null,"Click on the device, go to the DEVICE MANEGEMENT tab, check and copy the information and paste it into the code."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"device_id = '<Device name>'\nhostname = '<Device Endpoint>'\n")),(0,a.kt)("h3",{id:"upload-certificates"},"Upload certificates"),(0,a.kt)("p",null,"Upload the certificate to the device and set the path."),(0,a.kt)("p",null,"The downloaded certificate is in the form of the following and uses certificate.pem.crt and private.pem.key."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"deviceId-certificate.pem.crt"),(0,a.kt)("li",{parentName:"ul"},"deviceId-private.pem.key"),(0,a.kt)("li",{parentName:"ul"},"deviceId-public.pem.key"),(0,a.kt)("li",{parentName:"ul"},"AmazonRootCA1.pem"),(0,a.kt)("li",{parentName:"ul"},"AmazonRootCA3.pem")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Convert Certificates (Using OpenSSL)")),(0,a.kt)("p",null,"Convert the certificate to der form using OpenSSL."),(0,a.kt)("p",null,"The original certificate is in base64-based PEM format, and you need to convert it to binary format .der."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"If you are using Windows 10 or higher, you can utilize the Windows Subsystem Linux (WSL) environment.\nOpenSSL Installer for Windows environment can be downloaded from ",(0,a.kt)("a",{parentName:"p",href:"https://slproweb.com/products/Win32OpenSSL.html"},"Link"),".")),(0,a.kt)("p",null,"Convert the device certificate and private key to der format using the command below."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"# Device certificate\nopenssl x509 -outform der -in < -out certificate.crt.der\n# Private key\nopenssl rsa -inform pem -in private.pem.key -outform DER -out private.key.der\n")),(0,a.kt)("p",null,"Upload the converted certificate using Thonny and set the path."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Open the File explorer window with the View - Files option."),(0,a.kt)("li",{parentName:"ul"},"Place the mouse cursor on the file or directory to be uploaded, right-click, and select the 'Upload to /' menu."),(0,a.kt)("li",{parentName:"ul"},"If set to a different path, modify it in main.py.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-py"},"# Certificate path\ncert_file = 'cert/certificate.crt.der'\nkey_file = 'cert/privateKey.key.der'\n")),(0,a.kt)("h3",{id:"install-the-micropython-library"},"Install the Micropython library"),(0,a.kt)("p",null,"Install the MQTT library in the Thonny environment."),(0,a.kt)("p",null,"After selecting Tools - Manage packages from the top menu, search for the umqtt keyword and install the micropython-umqtt.simple package."),(0,a.kt)("div",null,(0,a.kt)("img",{src:"https://github.com/renakim/renakim.github.io/blob/master/files/w5100s-evb-pico/pico-micropython-azure-08.png?raw=true"})),(0,a.kt)("p",null,"If the installation went well, you can check the installed packages by clicking umqtt in the list on the left."),(0,a.kt)("h2",{id:"run-and-monitor"},"Run and Monitor"),(0,a.kt)("p",null,"With main.py open in Thonny, click the play button at the top or press F5 to run the application."),(0,a.kt)("p",null,"Debug messages are output like below:"),(0,a.kt)("div",null,(0,a.kt)("img",{src:"https://github.com/renakim/renakim.github.io/blob/master/files/w5100s-evb-pico/pico-micropython-thonny_mqtt.png?raw=true"})),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"If you get a connection error, it's likely a certificate issue. Make sure you set the path correctly and put the certificate converted to .der.")),(0,a.kt)("h3",{id:"raw-data-monitoring"},"RAW DATA monitoring"),(0,a.kt)("p",null,"You can check the real-time received data in the Device's RAW DATA tab."),(0,a.kt)("div",null,(0,a.kt)("img",{alt:"template-list",src:(0,o.Z)("/img/quickstart/connecting-device-cloud/rawdata.png")})),(0,a.kt)("p",null,"Please refer to the following guide on how to use the dashboard."),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"/quickstart/how-to-connect-device/creating-dashboard"},"Creating a Dashboard")))}d.isMDXComponent=!0}}]);